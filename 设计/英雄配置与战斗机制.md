# 英雄配置与战斗机制



## 数据结构





#### 战斗状态类（Fight::State）



用于维护一场战斗



#### 英雄类（Legend）

##### 	成员对象

| 对象名     | 类型         | 描述 |
| ---------- | ------------ | ---- |
| 英雄名     |              |      |
| 英雄描述   |              |      |
| 英雄标签   |              |      |
| 英雄属性表 | 英雄属性表类 |      |
| 被动技能   | 技能类       |      |
| 普通攻击   | 技能类       |      |
| 主动技能   | 技能类[3]    |      |
|            |              |      |

##### 成员函数

​	

#### 英雄属性表类（Legend::Property_table）

​	记录英雄的属性，每个属性都是一个函数对象 **Property**。

| 属性名                    | 描述                   |
| ------------------------- | ---------------------- |
| 生命值上限（HP_lim）      |                        |
| 法力值上限（MP_lim）      |                        |
| 行动力上限（AP_lim）      |                        |
| 法力值回复（MP_re）       |                        |
| 敏捷（AP_re）             |                        |
| 攻击力（ATK）             |                        |
| 物理抵抗（PD_res）        |                        |
| 魔法抵抗（MD_res）        |                        |
|                           |                        |
|                           |                        |
| 暴击率（）                |                        |
| 暴击伤害（）              |                        |
| 敏捷收益（exAPre_profit） | 获得的额外敏捷值的系数 |
|                           |                        |
|                           |                        |
|                           |                        |
|                           |                        |
|                           |                        |
|                           |                        |



**函数对象类型 Property**：包含两个成员，一个表示属性基础值，一个表示属性成长值。其 **operator()** 接收一个代表等级的整数参数，返回该等级时的函数值。



#### 技能类（Legend::Skill）

​	描述一个技能。

​	成员对象

| 对象名 | 类型 | 描述                       |
| ------ | ---- | -------------------------- |
| name   |      | 技能名称                   |
| tag    | int  | 技能标签：主动/被动/普攻等 |
|        |      |                            |
|        |      |                            |
|        |      |                            |
|        |      |                            |
|        |      |                            |
|        |      |                            |
|        |      |                            |







#### 战斗脚本类（Fight::CScript）

​	维护一个语法类C的脚本，可以控制战斗。



#### 战斗配置类（Fight_config）







